<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Sony Xperia XA2 â€” Mobile NixOS</title>
<link rel="stylesheet" href="../styles/styles.css">
<link lang="en" rel="alternate" type="application/rss+xml" title="RSS feed (EN)" href="../index.xml" />
</head>
<body class="devices_sony-pioneer article">
<header>
  <nav>
    <ul>
      <li>
        <h1>
          <a href='../index.html' class=''>Mobile NixOS</a>
        </h1>
      </li>
      <li><a href='../getting-started.html' class=''>Getting Started</a></li>
      <li><a href='../resources.html' class=''>Resources</a></li>
      <li><a href='../devices/index.html' class=''>Devices List</a></li>
    </ul>
  </nav>
</header>

<div id="header">
<h1>Sony Xperia XA2</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="sidebarblock device-sidebar">
<div class="content">
<div class="title">Sony Xperia XA2</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Manufacturer</dt>
<dd>
<p>Sony</p>
</dd>
<dt class="hdlist1">Name</dt>
<dd>
<p>Xperia XA2</p>
</dd>
<dt class="hdlist1">Identifier</dt>
<dd>
<p>sony-pioneer</p>
</dd>
<dt class="hdlist1">System Type</dt>
<dd>
<p>android</p>
</dd>
<dt class="hdlist1">SoC</dt>
<dd>
<p>qualcomm-sdm660</p>
</dd>
<dt class="hdlist1">Architecture</dt>
<dd>
<p>aarch64-linux</p>
</dd>
<dt class="hdlist1">Supports Stage-0</dt>
<dd>
<p>no</p>
</dd>
<dt class="hdlist1">Source</dt>
<dd>
<p><a href="https://github.com/NixOS/mobile-nixos/tree/master/devices/sony-pioneer">Mobile NixOS repository</a></p>
</dd>
<dt class="hdlist1">Builds</dt>
<dd>
<p><a href="https://hydra.nixos.org/job/mobile-nixos/unstable/device.sony-pioneer.x86_64-linux">Hydra (<code>default</code> build)</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_building_and_installing">Building and installing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are multiple installation methods for your <em>Sony Xperia XA2</em>.
They all rely on flashing one or more partitions on your device.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p><strong>All installation methods can lead to data loss.</strong></p>
</div>
<div class="paragraph">
<p>Flashing a partition <strong>will erase everything on the partition</strong>. Additionally,
the common backups methods, e.g. TWRP, will <strong>not</strong> backup the <code>userdata</code>
partition, which may be the installation target.</p>
</div>
<div class="paragraph">
<p>Make backups.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_using_fastboot">Using Fastboot</h3>
<div class="paragraph">
<p>This will produce a folder with a flashing script, and the partition images for
your <em>Sony Xperia XA2</em>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ nix-build --argstr device sony-pioneer -A build.android-fastboot-images</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can build a specific partition image:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ nix-build --argstr device sony-pioneer -A build.android-bootimg
$ nix-build --argstr device sony-pioneer -A build.rootfs</pre>
</div>
</div>
<div class="paragraph">
<p>The device will need to be booted in its bootloader, or <code>fastboot</code>, mode.</p>
</div>
<div class="paragraph">
<p>The boot images can be installed using the following command, assuming the
<code>android-fastboot-images</code> output was used.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ result/flash-critical.sh</pre>
</div>
</div>
<div class="paragraph">
<p>If you have a system image (<code>system.img</code>) built, you can use <code>fastboot</code> to
flash it to the device. Note that it might be too big to fit over the <code>system</code>
partition. In such case, it can be flashed on the <code>userdata</code> partition.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ fastboot flash userdata system.img</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_flashable_zip">Using a flashable zip</h3>
<div class="paragraph">
<p>An alternative installation method is to use a flashable zip. The flashable zip
can be built for your <em>Sony Xperia XA2</em> using one of the following
commands:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ nix-build --argstr device sony-pioneer -A build.android-flashable-bootimg
$ nix-build --argstr device sony-pioneer -A build.android-flashable-system
$ nix-build --argstr device sony-pioneer -A build.android-flashable-zip</pre>
</div>
</div>
<div class="paragraph">
<p>The first two will flash only a specific partition. The last one contains the
partitions of the two previous one.</p>
</div>
<div class="paragraph">
<p>The zip can either be copied to the device and selected in a compatible
Android recovery, or sent to the device through <code>adb sideload</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$ adb sideload /nix/store/eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee-flashable-sony-pioneer-boot.zip</pre>
</div>
</div>
<div class="paragraph">
<p>By default it will flash to the <code>system</code> partition. Some configurations may
change this to flash to the <code>userdata</code> partition. In that case, <strong>no warning is
given before flashing</strong>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_device_specific_notes">Device-specific notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_fastboot">Fastboot</h3>
<div class="paragraph">
<p>This device has a quirky way to get to fastboot.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You have to have the device connected to a computer, or else it will not activate fastboot mode.</p>
</li>
<li>
<p>Fastboot shows nothing on the display</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With the phone connected to a computer, hold volume up and <strong>somehow</strong> cause a
reboot (from the system, or by holding power to force reset).</p>
</div>
<div class="paragraph">
<p>Alternatively, from a powered-off state, hold volume up and connect to your
computer.</p>
</div>
<div class="paragraph">
<p>Finally, you can always trigger a reboot to bootloader via software. From
within Mobile NixOS, <code>sudo reboot bootloader</code>, or from an Android-based system
using <code>adb reboot bootloader</code> or equivalent methods.</p>
</div>
<div class="paragraph">
<p>Note that the LED will light up blue when in fastboot mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_failure_to_fastboot_flash">Failure to <code>fastboot flash</code></h3>
<div class="paragraph">
<p>It is possible that you might run into issues with this device when connected to a USB3 port with a USB3 cable. If that happens:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check if there is a USB2 port on your computer or on the USB hub you are using. Connect your phone to the USB2 port for flashing instead.</p>
</li>
<li>
<p>If your USB hub only has USB3 ports, then connect the hub to PC with a USB2 data cable, and XA2 to the hub with any USB data cable ("USB Type-C" in the XA2 end).</p>
</li>
<li>
<p>If there are only USB3 ports available, you can force your USB3 ports to USB2 mode.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_forcing_usb3_ports_to_usb2_mode">Forcing USB3 ports to USB2 mode</h4>
<div class="paragraph">
<p>The following commands will force all USB3 ports to USB2 mode temporarily.</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ nix-shell -p pciutils
 [nix-shell:~]$ lspci -nn | grep USB | cut -d '[' -f3 | cut -d ']' -f1 | xargs -I@ sudo setpci -H1 -d @ d0.l=0</pre>
</div>
</div>
<div class="paragraph">
<p>After which hopefully the procedure works. After successfully flashing, restart your computer to bring the USB3 ports to their normal mode.</p>
</div>
<div class="paragraph">
<p>Alternatively, the following commands can be used to revert the change.</p>
</div>
<div class="listingblock">
<div class="content">
<pre> $ nix-shell -p pciutils
 [nix-shell:~]$ lspci -nn | grep USB | cut -d '[' -f3 | cut -d ']' -f1 | xargs -I@ sudo setpci -H1 -d @ d0.l=1</pre>
</div>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://jolla.zendesk.com/hc/en-us/articles/360012031854-Flashing-Sailfish-to-Xperia-XA2-fails-Troubleshooting-" class="bare">https://jolla.zendesk.com/hc/en-us/articles/360012031854-Flashing-Sailfish-to-Xperia-XA2-fails-Troubleshooting-</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
<footer id="footer">
  <nav>
    <ul>
      <li></li>
      
      
      <li><a href='../sitemap.html' class=''>Site Map</a></li>
    </ul>
  </nav>
</footer>

</body>
</html>